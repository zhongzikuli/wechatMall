!function(o){window.pay={wxPay:function(e,t,r){function n(){WeixinJSBridge.invoke("getBrandWCPayRequest",d,function(o){"get_brand_wcpay_request:ok"==o.err_msg?t():r()})}var d=o.extend({signType:"MD5"},e);r=r||function(){o.toast("支付失败")},"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()},getAddressByCustId:function(o,e){var t={rootCode:xhq.userInfo.rootCode,custId:xhq.userInfo.id};xhq.callXHQ(INTERFACE_MAP.tobGetCustomerDeliverAddr,t,o,e)},getProductDetail:function(o,e,t){var r={rootCode:xhq.userInfo.rootCode,onlineId:o,orgId:xhq.userInfo.orgInfo.orgId,type:1};xhq.callXHQ(INTERFACE_MAP.tobGoodsdetail,r,e,t)},tocCreateorder:function(e,t,r){var n=o.extend({rootCode:xhq.userInfo.rootCode,custId:xhq.userInfo.id,orgId:xhq.userInfo.orgInfo.orgId,uid:xhq.userInfo.operInfo.operId,orderChannel:3,openId:xhq.userInfo.payOpenId||""},e);xhq.callXHQ(INTERFACE_MAP.tocCreateorder,n,t,r)},tobGetVerificationCode:function(e,t,r,n){if(!e.attr("disabled")){var d=new RegExp("^(13[0-9]|15[012356789]|17[0135678]|18[0-9]|14[57])[0-9]{8}$","ig");if(!d.test(t))return void n({message:"手机号码错误"});var a={rootCode:xhq.userInfo.rootCode,phoneNo:t,type:5},i=e.val();e.val("发送中.."),e.attr("disabled","disabled"),xhq.callXHQ(INTERFACE_MAP.tobGetVerificationCode,a,function(){var o=60,t=setInterval(function(){--o<1?(t&&clearInterval(t),e.attr("disabled",null).val(i)):e.val(i+"("+o+")")},1e3);r&&r()},function(t){e.attr("disabled",null),n(t)||o.toast(t.message)})}},tobOrderdetail:function(e,t,r){var n={rootCode:xhq.userInfo.rootCode,id:e};r=r||function(e){o.toast(e.message)},xhq.callXHQ(INTERFACE_MAP.tobOrderdetail,n,t,r)},getWXPayConfig:function(e,t,r,n){var d={rootCode:xhq.userInfo.rootCode,orderId:t,openid:e};n=n||function(e){o.toast(e.message)},xhq.callXHQ(INTERFACE_MAP.tocWxJsPayOrder,d,r,n)},tobTakegoods:function(e,t,r){var n=o.extend({rootCode:xhq.userInfo.rootCode,orgId:xhq.userInfo.orgInfo.orgId,uid:xhq.userInfo.operInfo.operId,orderId:""},e);xhq.callXHQ(INTERFACE_MAP.tobTakegoods,n,t,r)},confirmOrder:function(e,t,r){var n=o.extend({rootCode:xhq.userInfo.rootCode,uid:xhq.userInfo.id,orderId:""},e);xhq.callXHQ(INTERFACE_MAP.tocConfirmOrder,n,t,r)},getKuaidiUrl:function(e,t,r){var n=o.extend({rootCode:xhq.userInfo.rootCode,com:"",nu:""},e);xhq.callXHQ(INTERFACE_MAP.tobKuaidi100,n,t,r)}}}(Zepto);