function openIndicator(){$.showIndicator(),isIndicator=!0}function hideIndicator(){isIndicator&&($.hideIndicator(),isIndicator=!1),loading=!1}var HTML_HEAD="<head><meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/><style type=\"text/css\">\n\t   body{padding:0;margin:0}\t   img{width:100%}\t.detail_intro{\n\t    font-size: 12px;\n\t    color: #5A5A5A;\n\t    overflow-x: hidden;\n\t    font-family: 'microsoft yahei', Verdana, Arial, Helvetica, sans-serif;\n\t}\n\t.detail_intro table{\n\t    border-spacing: 0px;\n\t    border-collapse: collapse;\n\t    font-size:16px;color:#5A5A5A;\n\t    font-family:'microsoft yahei', Verdana, Arial, Helvetica, sans-serif;\n\t    margin:0px;\n\t    padding:0px;\n\t    width: 100%!important;\n\t    background:#fff!important\n\t}\n\t.detail_intro td {\n\t    height: 10px;\n\t    padding: 0 5px;\n\t    line-height: 20px;\n\t    font-size: 12px;\n\t    color: #333;\n\t    word-break: break-all;\n\t    border:1px solid #000!important;\n\t    background: #fff!important;\n\t}\n\t.detail_intro tr td:first-child{\n\t    text-align: center;\n\t    width: 130px;\n\t}\n</style></head><body><div class=\"detail_intro\">",HTML_END="</div>";$(function(){function s(){var s={interId:"toc.getBannerDetail",channel:"C",actId:xhq.getQuery("actId"),isWs:1,custId:getLocalSession("custId")};xhq.__runXHQ(s,function(s){0==s.status?null!=s.body&&void 0!=s.body&&($("#actContent").append(HTML_HEAD+s.body.content||""+HTML_END),t(s)):(hideIndicator(),$.toast(s.message)),hideIndicator()})}function t(s){var t="";if(void 0!=s.body.goods&&null!=s.body.goods&&s.body.goods.length>0){for(var i=0;i<s.body.goods.length;i++){var o=s.body.goods[i];t+=o.isOnline>0?n(o):a(o)}$(".content .list_container").append(t)}}function a(s){var t='<li class="ws_li"><a href="goods_detail.html?onlineId='+s.onlineId+"&"+xhq.getVersion()+'" class="item-link list-button external" data-transition="slide-in"><div class="selling_pic"><img src='+s.ImageUrl+'></div><div class="selling_text"><div class="selling_title">'+s.showName+'</div><div class="selling_price"><div class="pri_l">';if(t+=s.purchasePrice&&s.purchasePrice>0?'<p>¥<span class="pri_one">'+s.salePrice/100+'</span><s>¥<span class="pri_two">'+s.purchasePrice/100+"</span></s></p>":'<p>¥<span class="pri_one">'+s.salePrice/100+'</span><s><span class="pri_two"></span></s></p>',t+='</div><div class="pri_r">赚: ¥<span>'+s.bonus/100+'</span></div></div><div class="go_buy"><div class="sur_l">',s.stock<=0)t+='<p class="surplus"><span class="span_f"></span><span class="span_s">剩余<span>0</span>个</span></p></div>';else{var a=i(s.totalStock,s.stock);t+=1==a?'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:4.5rem;border-radius: 8px"></span>':a>.9&&a<1?'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:4.05rem;border-radius: 8px 0 0 8px"></span>':'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:'+4.5*a+'rem;border-radius: 8px 0 0 8px" ></span>',t+='<span class="span_s">剩余<span>'+s.stock+"</span>个</span></p></div>"}return t+='</div></div></a><div class="sur_r uptoshop" data_id='+s.onlineId+'><img src="../img/icon_shi.png" alt=""></div></li>'}function n(s){var t='<li class="lied"><a href="goods_detail.html?onlineId='+s.onlineId+"&"+xhq.getVersion()+'" class="item-link list-button external" data-transition="slide-in"><div class="selling_pic"><img src='+s.ImageUrl+'></div><div class="selling_text"><div class="selling_title">'+s.showName+'</div><div class="selling_price"><div class="pri_l">';if(t+=s.purchasePrice&&s.purchasePrice>0?'<p>¥<span class="pri_one">'+s.salePrice/100+'</span><s>¥<span class="pri_two">'+s.purchasePrice/100+"</span></s></p>":'<p>¥<span class="pri_one">'+s.salePrice/100+'</span><s><span class="pri_two"></span></s></p>',t+='</div><div class="pri_r">赚: ¥<span>'+s.bonus/100+'</span></div></div><div class="go_buy"><div class="sur_l">',s.stock<=0)t+='<p class="surplus"><span class="span_f"></span><span class="span_s">剩余<span>0</span>个</span></p></div>';else{var a=i(s.totalStock,s.stock);t+=1==a?'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:4.5rem;border-radius: 8px"></span>':a>.9&&a<1?'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:4.05rem;border-radius: 8px 0 0 8px"></span>':'<p class="surplus" status="'+s.status+'" totalStock="'+s.totalStock+'" stock="'+s.stock+'"><span class="span_f" style="width:'+4.5*a+'rem;border-radius: 8px 0 0 8px" ></span>',t+='<span class="span_s">剩余<span>'+s.stock+"</span>个</span></p></div>"}return t+='</div></div></a><div class="sur_r">已添加</div></li>'}function i(s,t){return 0==s?1:t/s}2!=getLocalSession("userType")&&$.alert("亲，您尚未注册成为全民集市的店长，请先注册","温馨提醒",function(){xhq.gotoRegUrl()}),openIndicator(),s(),$(".list_container").on("tap","li .uptoshop",function(){var s=$(this),t=$(this).attr("data_id"),a={interId:"toc.custUpOnline",channel:"C",custId:getLocalSession("custId"),onlineId:t};$.showIndicator(),xhq.__runXHQ(a,function(t){$.hideIndicator(),0==t.status?(s.removeClass("uptoshop"),s.parent().removeClass("ws_li"),s.parent().addClass("lied"),s.html("已添加"),$.toast("上架成功")):$.toast(t.message)})})});