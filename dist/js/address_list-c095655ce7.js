function openIndicator(){$.showIndicator(),isIndicator=!0}function hideIndicator(){isIndicator&&($.hideIndicator(),isIndicator=!1),loading=!1}function event(){$(".bar footer").click(function(){var s=xhq.getQuery("pageType")||"";xhq.gotoUrl("address_register.html",{pageType:s})}),$(".content-block2 .address").each(function(){$(this).find(".bianji").click(function(){var s=$(this).parents(".address").attr("addressId"),t=$(this).parents(".address").attr("phoneNo"),e=$(this).parents(".address").attr("province"),a=$(this).parents(".address").attr("city"),d=$(this).parents(".address").attr("country"),r=$(this).parents(".address").attr("address"),n=$(this).parents(".address").attr("defaultFlag"),i=$(this).parents(".address").find(".addressName").text(),o={addressId:s,addressName:i,phoneNo:t,province:e,city:a,country:d,address:r,defaultFlag:n};setLocalSession("address_edit",JSON.stringify(o));var c=xhq.getQuery("pageType")||"";xhq.gotoUrl("address_edit.html",{pageType:c})});var s=xhq.getQuery("pageType")||"";if("2"!=s){$(this);$(this).find(".address-div").click(function(){var s=$(this).parents(".address").attr("addressId"),t=$(this).parents(".address").attr("phoneNo"),e=$(this).parents(".address").attr("province"),a=$(this).parents(".address").attr("city"),d=$(this).parents(".address").attr("country"),r=$(this).parents(".address").attr("address"),n=$(this).parents(".address").attr("defaultFlag"),i=$(this).parents(".address").find(".addressName").text(),o={addressId:s,addressName:i,phoneNo:t,province:e,city:a,country:d,address:r,defaultFlag:n};setLocalSession("localAddressSession",JSON.stringify(o)),xhq.gotoUrl("order.html")})}})}$(document).ready(function(){var s=getLocalSession("openid")||"",t=getLocalSession("custId")||"";if(""==s||""==t)return $.toast("未获取到用户资料，无法访问"),void xhq.gotoErrorPage();openIndicator();var e={interId:"toc.custAddressList",channel:"C",custId:t};xhq.__runXHQ(e,function(s){if(0==s.status){for(var t=$(".content-block2").html(),e=0;e<s.body.length;e++){var a=s.body[e],d=a.phoneNo,r=d.replace(d.substr(3,7),"****"),n=a.province+a.city+a.country+a.address;t+='<div class="address" defaultFlag="'+a.defaultFlag+'" phoneNo="'+a.phoneNo+'" addressId="'+a.addressId+'" province="'+a.province+'" city="'+a.city+'" country="'+a.country+'" address="'+a.address+'"><div class="address-div">',t+='<span class="addressName">'+a.name+'</span> <span class="attr phone" id="addressPhoneNo" style="color:rgba(0,0,0,1)">'+r+"</span>",t+='<p style="margin-top:0.2rem;">',"1"==a.defaultFlag&&(t+='<span id="moren">默认</span>'),t+='<span class="addressAttr attr phone" id="addressDetail" style="color: rgba( 0, 0, 0,0.6);">'+n+"</span>",t+="</p>",t+='</div><span class="bianji">编辑</span></div>'}$(".content-block2").html(t),hideIndicator()}else hideIndicator(),$.toast(s.message);event()})});