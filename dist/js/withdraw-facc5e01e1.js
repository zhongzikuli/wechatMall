function openIndicator(){$.showIndicator(),isIndicator=!0}function hideIndicator(){isIndicator&&($.hideIndicator(),isIndicator=!1),loading=!1}var pageNo=0,pageSize=10,custId=0,userType=0,$content=null,loading=!1;$(function(){function n(){pageNo+=1;var n={interId:"toc.moneyWithDrawList",channel:"C",custId:custId,pageNo:pageNo,pageSize:pageSize};xhq.__runXHQ(n,function(n){0==n.status?(a(n),(!n.body||!n.body.data||n.body.data.length<pageSize)&&($.detachInfiniteScroll($content),$(".infinite-scroll-preloader").remove()),loading=!1):(hideIndicator(),$.toast(n.message)),hideIndicator()})}function a(n){var a="";if(n.body&&n.body&&n.body.length>0){for(var o=0;o<n.body.length;o++){var t=n.body[o];a+=e(t)}$(".content .list_container").append(a)}}function e(n){var a="";return 1==n.status?a+='<li class="list_item dealing"><div class="box_l"><span>提现申请处理中</span><br><span class="draw_time">'+n.createTime+'</span></div><div class="box_r">&yen;'+n.money/100+"</div></li>":2==n.status?a+='<li class="list_item success"><div class="box_l"><span>提现成功</span><br><span class="draw_time">'+n.createTime+'</span></div><div class="box_r">&yen;'+n.money/100+"</div></li>":(a+='<li class="list_item failing"><div class="box_l">',a+=n.remark?"<span>提现失败("+n.remark+")</span><br>":"<span>提现失败</span><br>",a+='<span class="draw_time">'+n.createTime+'</span></div><div class="box_r">&yen;'+n.money/100+"</div></li>"),a}return custId=getLocalSession("custId")||"0",userType=getLocalSession("userType")||"1",2!=userType||custId<=0?($.toast("非合法用户，无法访问"),void xhq.gotoErrorPage()):($(document).on("pageInit","#page-ptr",function(a,e,o){$content=$(o).find(".content"),$(o).on("infinite",function(a){loading||(openIndicator(),loading=!0,setTimeout(function(){isAppendMode=1,n(),$.refreshScroller()},1e3))})}),$.init(),openIndicator(),n(),void $("#toDraw").on("tap",function(){openIndicator();var n={interId:"toc.getCustBankInfo",channel:"C",custId:custId};xhq.__runXHQ(n,function(n){0==n.status?n.body&&n.body.bankcard?xhq.gotoUrl("to_bank1.html",{bankname:n.body.bankname,bankcard:n.body.bankcard,openbank:n.body.openbank,cardowner:n.body.cardowner}):xhq.gotoUrl("bind_card.html"):(hideIndicator(),$.toast(n.message)),hideIndicator()})}))});